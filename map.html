<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>魔界府メトロ 路線図</title>
  <style>
    body {
      font-family: "Helvetica Neue", sans-serif;
      background: #fff1f9;
      padding: 20px;
      color: #1f2937;
    }
    h1 {
      text-align: center;
      color: #d946ef;
      font-size: 28px;
      margin-bottom: 40px;
    }
    .map-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 30px;
      position: relative;
    }
    .station {
      background: #fdf4ff;
      border: 3px solid #d8b4fe;
      border-radius: 20px;
      width: 260px;
      padding: 16px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      position: relative;
      cursor: pointer;
      transition: transform 0.2s ease;
    }
    .station:hover {
      transform: scale(1.02);
    }
    .station::before {
      content: "";
      position: absolute;
      left: -30px;
      top: 50%;
      transform: translateY(-50%);
      width: 20px;
      height: 20px;
      background: #c084fc;
      border: 3px solid #7e22ce;
      border-radius: 50%;
    }
    .station h2 {
      margin: 0 0 6px;
      font-size: 18px;
      color: #7e22ce;
      text-align: center;
    }
    .comment {
      font-size: 13px;
      color: #6b7280;
      text-align: center;
    }
    .connector {
      width: 4px;
      height: 30px;
      background: linear-gradient(to bottom, #c084fc, #7e22ce);
    }
    .details-popup {
      position: absolute;
      top: 0;
      left: 280px;
      z-index: 10;
      background: #fefce8;
      border: 2px dashed #facc15;
      border-radius: 12px;
      padding: 16px;
      width: 280px;
      box-shadow: 0 4px 16px rgba(0,0,0,0.2);
      display: none;
    }
    .details-popup img {
      width: 100%;
      border-radius: 10px;
      margin-bottom: 10px;
    }
    .details-popup h3 {
      font-size: 18px;
      margin: 0 0 6px;
      color: #92400e;
    }
    .details-popup p {
      font-size: 14px;
      color: #4b5563;
      margin: 0;
      white-space: pre-wrap;
    }
    .secret-trigger {
      position: absolute;
      top: 120px;
      left: 190px;
      width: 30px;
      height: 30px;
      background: rgba(255, 255, 255, 0.1); /* 薄い白で半透明 */
      border: 1px dashed #d946ef;
      border-radius: 6px;
      cursor: pointer;
    }
    .cafe-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(0, 0, 0, 0.9);
      display: none;
      z-index: 100;
      color: #fff;
      font-size: 18px;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      overflow: hidden;
    }
    .cafe-scene {
      width: 100%;
      height: 100%;
      background: url('bg_placeholder.jpg') center/cover no-repeat;
      position: relative;
      display: flex;
      justify-content: space-between;
      align-items: flex-end;
      padding: 40px;
      box-sizing: border-box;
    }
      .char-left {
      object-fit: contain;
      height: 90vh; /* 麗奈を大きく表示 */
    }

    .char-rei, .char-kana {
      object-fit: contain;
      height: 80vh;
    }

    .novel-box {
      position: absolute;
      bottom: 30px;
      left: 50%;
      transform: translateX(-50%);
      background-color: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 16px 24px;
      border-radius: 12px;
      font-size: 20px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 20px;
    }

    .novel-next-button {
      background-color: #8b5cf6;
      border: none;
      border-radius: 8px;
      padding: 8px 16px;
      color: white;
      font-size: 16px;
      cursor: pointer;
    }

    .textbox {
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0,0,0,0.7);
      padding: 20px;
      border-radius: 16px;
      width: 80%;
      font-size: 16px;
    }
    .cafe-overlay button {
      margin-top: 20px;
      padding: 10px 20px;
      font-size: 16px;
      background: #9333ea;
      border: none;
      border-radius: 8px;
      color: #fff;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <h1>魔界府メトロ - 路線図</h1>
  <div class="map-container">
    <div class="station" data-id="maou">魔王城<br><span class="comment">玲「いってきまーす！」／リリス「歌ってます♡」</span></div>
    <div class="connector"></div>
    <div class="station" data-id="chou">府庁前<br><span class="comment">奏「中心！」／ミモザ「改札広いよ」</span></div>
    <div class="secret-trigger" title="？？？"></div>
    <div class="connector"></div>
    <div class="station" data-id="minami">南城下町<br><span class="comment">町民「コロッケうまい」</span></div>
    <div class="connector"></div>
    <div class="station" data-id="hiro">広原台<br><span class="comment">高坂「未来都市構想メモ」</span></div>
    <div class="connector"></div>
    <div class="station" data-id="yume">夢霧が谷<br><span class="comment">生徒「魔力検定あるよ♡」</span></div>
  </div>

  <div class="details-popup" id="popup">
    <img src="" alt="駅イメージ" id="popupImage">
    <h3 id="popupTitle"></h3>
    <p id="popupInfo"></p>
  </div>

  <div class="cafe-overlay" id="cafeOverlay">
    <div class="cafe-scene">
      <img class="char-left" src="reina.png" alt="麗奈">
      <img class="char-rei" src="rei.png" alt="玲">
      <img class="char-kana" src="kana.png" alt="奏">
      <div class="textbox" id="textBox">玲「ここが魔界府に移転したliveNeoか！なんかかっこいいな！」</div>
    </div>
    <button id="nextBtn">▶ 次へ</button>
  </div>

  <script>
    const stations = {
      maou: {
        title: "魔王城駅",
        img: "maou.png",
        info: "・開業年：魔暦101年\n・地下4階構造、魔力昇降ホーム\n・名物：リリスの発車メロディ＆Re+M+Magic公式グッズ"
      },
      chou: {
        title: "府庁前駅",
        img: "chou.png",
        info: "・政治文化の中心駅\n・奏とミモザの記念オブジェあり\n・広報ブースとカフェが人気"
      },
      minami: {
        title: "南城下町駅",
        img: "minami.png",
        info: "・庶民の活気あふれる商店街直結\n・名物：昼のコロッケと夕方セール\n・観光にもオススメ"
      },
      hiro: {
        title: "広原台駅",
        img: "hiro.png",
        info: "・未来都市構想の中核拠点\n・空港アクセス対応\n・高坂大統領メモ展示コーナーあり"
      },
      yume: {
        title: "夢霧が谷駅",
        img: "yume.png",
        info: "・サキュバス学校の最寄駅\n・魔力検定センター直結\n・魔法制服を着た案内ロボが出迎え♡"
      }
    };

    const popup = document.getElementById("popup");
    const img = document.getElementById("popupImage");
    const title = document.getElementById("popupTitle");
    const info = document.getElementById("popupInfo");

    document.querySelectorAll('.station').forEach(el => {
      el.addEventListener('click', (e) => {
        const id = el.getAttribute('data-id');
        const data = stations[id];
        img.src = data.img;
        img.alt = data.title;
        title.textContent = data.title;
        info.textContent = data.info;
        popup.style.display = 'block';

        const rect = el.getBoundingClientRect();
        popup.style.top = `${window.scrollY + rect.top}px`;
        popup.style.left = `${rect.right + 10}px`;
      });
    });

    const overlay = document.getElementById('cafeOverlay');
    const textBox = document.getElementById('textBox');
    const nextBtn = document.getElementById('nextBtn');
    const messages = [
      "玲「ここが魔界府に移転したliveNeoか！なんかかっこいいな！」",
      "麗奈「ようこそ。またバイトする？」",
      "奏「します！よろしくお願いいたします！」"
    ];
    let msgIndex = 0;

    document.querySelector('.secret-trigger').addEventListener('click', () => {
      overlay.style.display = 'flex';
      msgIndex = 0;
      textBox.textContent = messages[msgIndex];
    });

    nextBtn.addEventListener('click', () => {
      msgIndex++;
      if (msgIndex < messages.length) {
        textBox.textContent = messages[msgIndex];
      } else {
        overlay.style.display = 'none';
      }
    });
  </script>
</body>
</html>
